<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freelancer Dashboard - SkillJourney</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome@6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Leaflet CSS for maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        /* Premium Color Palette - Enhanced */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            --accent-gradient: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            --success-gradient: linear-gradient(135deg, #51cf66 0%, #40c057 100%);
            --rainbow-gradient: linear-gradient(135deg, #667eea, #4ecdc4, #ff6b6b);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
            --dark-bg: #0f0f23;
            --darker-bg: #0a0a1a;
            --card-bg: rgba(30, 30, 60, 0.6);
            --text-primary: #ffffff;
            --text-secondary: #e2e8f0;
            --text-muted: #94a3b8;
            --shadow-glow: 0 10px 40px rgba(102, 126, 234, 0.25);
            --shadow-intense: 0 25px 50px rgba(0, 0, 0, 0.4);
            --border-radius: 20px;
            --sidebar-width: 280px;
            --sidebar-collapsed: 80px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Premium Background Animation */
        .bg-animation {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
        }

        .floating-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.2;
            animation: float-orbs 30s ease-in-out infinite;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: var(--primary-gradient);
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            background: var(--secondary-gradient);
            bottom: 15%;
            right: 8%;
            animation-delay: 10s;
        }

        .orb-3 {
            width: 350px;
            height: 350px;
            background: var(--accent-gradient);
            top: 60%;
            left: 75%;
            animation-delay: 20s;
        }

        /* Premium Glassmorphism Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(30px);
            border-right: 1px solid var(--glass-border);
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            box-shadow: 5px 0 30px rgba(0, 0, 0, 0.3);
        }

        .sidebar.collapsed {
            width: var(--sidebar-collapsed);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
        }

        .sidebar-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: shimmer 3s ease-in-out infinite;
        }

        .sidebar-brand {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
            color: var(--text-primary);
            position: relative;
            z-index: 2;
        }

        .brand-logo {
            width: 50px;
            height: 50px;
            background: var(--rainbow-gradient);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 20px;
            color: white;
            box-shadow: var(--shadow-glow);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .brand-logo::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 4s linear infinite;
        }

        .sidebar-brand:hover .brand-logo {
            transform: rotate(10deg) scale(1.1);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .brand-text {
            font-size: 24px;
            font-weight: 800;
            background: var(--rainbow-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-shift 4s ease-in-out infinite;
            background-size: 200% 200%;
        }

        .sidebar.collapsed .brand-text {
            display: none;
        }

        .toggle-sidebar {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            z-index: 2;
        }

        .toggle-sidebar:hover {
            background: rgba(102, 126, 234, 0.3);
            color: var(--text-primary);
            transform: scale(1.1);
        }

        .sidebar.collapsed .toggle-sidebar {
            transform: rotate(180deg);
        }

        .sidebar-menu {
            flex: 1;
            padding: 1.5rem 0;
            display: flex;
            flex-direction: column;
        }

        .menu-section {
            padding: 1.25rem 1.5rem 0.75rem;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-muted);
            letter-spacing: 1px;
            position: relative;
        }

        .menu-section::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 1.5rem;
            right: 1.5rem;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--glass-border), transparent);
        }

        .sidebar.collapsed .menu-section {
            display: none;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.4s ease;
            margin: 0.25rem 1rem;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 5px;
            height: 0;
            background: var(--rainbow-gradient);
            border-radius: 0 5px 5px 0;
            transition: all 0.4s ease;
        }

        .menu-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .menu-item:hover::after,
        .menu-item.active::after {
            left: 100%;
        }

        .menu-item:hover,
        .menu-item.active {
            background: var(--glass-bg);
            color: var(--text-primary);
            transform: translateX(8px);
            box-shadow: var(--shadow-glow);
        }

        .menu-item:hover::before,
        .menu-item.active::before {
            height: 70%;
        }

        .menu-item i {
            font-size: 1.4rem;
            margin-right: 1rem;
            width: 24px;
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            z-index: 2;
        }

        .menu-item:hover i {
            transform: scale(1.2);
            filter: drop-shadow(0 0 10px currentColor);
        }

        .sidebar.collapsed .menu-item span {
            display: none;
        }

        .sidebar.collapsed .menu-item {
            justify-content: center;
            margin: 0.25rem 0.75rem;
            padding: 1rem;
        }

        .sidebar.collapsed .menu-item i {
            margin-right: 0;
        }

        /* Main Content Area */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 2rem;
        }

        .main-content.expanded {
            margin-left: var(--sidebar-collapsed);
        }

        /* Premium Navigation Bar */
        .custom-navbar {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-intense);
            padding: 1.5rem 2rem;
            margin-bottom: 2.5rem;
            animation: slide-down 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .custom-navbar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            animation: nav-shimmer 4s ease-in-out infinite;
        }

        .nav-brand-container {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            position: relative;
            z-index: 2;
        }

        .mobile-menu-toggle {
            display: none;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            font-size: 1.4rem;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: scale(1.1);
        }

        .animated-logo {
            width: 55px;
            height: 55px;
            background: var(--rainbow-gradient);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            box-shadow: var(--shadow-glow);
            animation: pulse-logo 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .animated-logo::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 4s linear infinite;
        }

        .nav-text-content h3 {
            color: var(--text-primary);
            margin-bottom: 0.25rem;
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--rainbow-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-shift 4s ease-in-out infinite;
            background-size: 200% 200%;
        }

        .welcome-text {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .username-highlight {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .profile-top-right {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .ask-ai-btn {
            background: var(--rainbow-gradient);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 0.8rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow-glow);
            position: relative;
            overflow: hidden;
        }

        .ask-ai-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }

        .ask-ai-btn:hover::before {
            left: 100%;
        }

        .ask-ai-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        /* Notification Styles */
        .notification-container {
            position: relative;
        }

        .notification-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .notification-btn:hover {
            background: rgba(102, 126, 234, 0.3);
            color: var(--text-primary);
            transform: scale(1.05);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent-gradient);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .notification-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 380px;
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-intense);
            z-index: 1000;
            display: none;
            margin-top: 10px;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .notification-dropdown.show {
            display: block;
        }

        .notification-header {
            padding: 1.25rem 1.25rem 0.75rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-header h6 {
            margin: 0;
            color: var(--text-primary);
            font-weight: 600;
        }

        .mark-all-read-btn {
            background: none;
            border: none;
            color: var(--primary-gradient);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mark-all-read-btn:hover {
            text-decoration: underline;
        }

        .notification-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .notification-item:hover {
            background: var(--glass-bg);
        }

        .notification-item.unread {
            background: rgba(102, 126, 234, 0.1);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-icon {
            font-size: 1.2rem;
            margin-top: 0.1rem;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-message {
            color: var(--text-primary);
            font-size: 0.9rem;
            line-height: 1.4;
            margin: 0;
        }

        .notification-time {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .notification-indicator {
            width: 8px;
            height: 8px;
            background: var(--primary-gradient);
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 0.5rem;
        }

        .notification-empty {
            padding: 2rem 1.25rem;
            text-align: center;
            color: var(--text-muted);
        }

        .notification-empty i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            opacity: 0.5;
        }

        .notification-footer {
            padding: 0.75rem 1.25rem;
            border-top: 1px solid var(--glass-border);
            text-align: center;
        }

        .view-all-link {
            color: var(--primary-gradient);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .view-all-link:hover {
            text-decoration: underline;
        }

        .profile-dropdown {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .profile-dropdown:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .profile-img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--glass-border);
            transition: all 0.3s ease;
        }

        .profile-dropdown:hover .profile-img {
            transform: scale(1.1);
            border-color: rgba(102, 126, 234, 0.5);
        }

        /* Premium Stats Cards */
        .stats-card {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fade-in-up 0.8s ease-out;
        }

        .stats-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: conic-gradient(from 0deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: rotate-gradient 15s linear infinite;
        }

        .stats-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--rainbow-gradient);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }

        .stats-card:hover::after {
            transform: scaleX(1);
        }

        .stats-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-intense);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .stats-number {
            font-size: 3rem;
            font-weight: 900;
            background: var(--rainbow-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            line-height: 1;
            position: relative;
            z-index: 2;
            animation: count-up 2s ease-out;
        }

        .stats-label {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 500;
            position: relative;
            z-index: 2;
            padding-left: 1.5rem;
        }

        .stats-label::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background: var(--primary-gradient);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .stats-card:hover .stats-label::before {
            background: var(--secondary-gradient);
            transform: translateY(-50%) scale(1.5);
        }

        /* Premium Cards */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-glow);
            transition: all 0.4s ease;
            color: var(--text-primary);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.8s ease;
        }

        .card:hover::before {
            left: 100%;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-intense);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .card-title {
            color: var(--text-primary);
            font-weight: 600;
        }

        .card-text {
            color: var(--text-secondary);
        }

        /* Job Cards - Enhanced with icons */
        .job-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 5px solid transparent;
            animation: slide-up 0.6s ease-out;
        }

        .job-card:hover {
            border-left-color: rgba(102, 126, 234, 0.8);
            transform: translateX(8px);
        }

        .job-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .save-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.4s ease;
            padding: 0.5rem;
            border-radius: 8px;
            position: relative;
        }

        .save-btn:hover {
            color: #4ecdc4;
            transform: scale(1.2);
        }

        .save-btn.saved {
            color: #4ecdc4;
            transform: scale(1.2);
        }

        /* Job Title Icons - Enhanced */
        .job-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .job-icon.web {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .job-icon.mobile {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
        }

        .job-icon.design {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
        }

        .job-icon.marketing {
            background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);
        }

        .job-icon.writing {
            background: linear-gradient(135deg, #a166ab 0%, #5073b8 100%);
        }

        .job-icon.data {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .job-icon.support {
            background: linear-gradient(135deg, #5ee7df 0%, #b490ca 100%);
        }

        .job-icon.sales {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
        }

        .job-icon.management {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .job-icon.consulting {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .job-icon.education {
            background: linear-gradient(135deg, #cd9cf2 0%, #f6f3ff 100%);
        }

        .job-icon.default {
            background: linear-gradient(135deg, #868e96 0%, #495057 100%);
        }

        /* Page Header */
        .page-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            position: relative;
        }

        .page-header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100px;
            height: 3px;
            background: var(--rainbow-gradient);
            border-radius: 3px;
        }

        .page-header h4 {
            color: var(--text-primary);
            font-weight: 800;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
            background: var(--rainbow-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-header p {
            color: var(--text-secondary);
            margin-bottom: 0;
            font-size: 1.1rem;
        }

        /* Premium Buttons */
        .btn-primary {
            background: var(--rainbow-gradient);
            border: none;
            font-weight: 600;
            padding: 0.85rem 1.75rem;
            border-radius: 12px;
            transition: all 0.4s ease;
            box-shadow: var(--shadow-glow);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-link {
            color: #60a5fa;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .btn-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-gradient);
            transition: width 0.3s ease;
        }

        .btn-link:hover {
            color: #93c5fd;
        }

        .btn-link:hover::after {
            width: 100%;
        }

        /* Premium AI Chat Interface - Enhanced text visibility */
        .chat-container {
            height: 520px;
            display: flex;
            flex-direction: column;
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-intense);
            overflow: hidden;
            border: 1px solid var(--glass-border);
            position: fixed;
            bottom: 25px;
            right: 25px;
            width: 380px;
            z-index: 999;
            transform: translateY(100%) scale(0.9);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chat-container.open {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .chat-header {
            background: var(--rainbow-gradient);
            color: white;
            padding: 1.5rem;
            font-weight: 700;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .chat-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 4s linear infinite;
        }

        .close-chat {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }

        .close-chat:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background-color: rgba(15, 15, 35, 0.9);
        }

        .message {
            margin-bottom: 1.5rem;
            display: flex;
            flex-direction: column;
            animation: message-appear 0.4s ease-out;
        }

        .message-bubble {
            padding: 1rem 1.25rem;
            border-radius: 20px;
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.5;
            position: relative;
        }

        .ai-message .message-bubble {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid var(--glass-border);
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            color: var(--text-primary);
        }

        .user-message {
            align-items: flex-end;
        }

        .user-message .message-bubble {
            background: var(--primary-gradient);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message-time {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            padding: 0 0.75rem;
        }

        .chat-input-container {
            padding: 1.5rem;
            border-top: 1px solid var(--glass-border);
            background: rgba(15, 15, 35, 0.9);
        }

        .chat-input.form-control {
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            padding: 1rem 1.25rem;
            resize: none;
            transition: all 0.3s ease;
            background: var(--glass-bg) !important;
            color: #fff !important;
        }

        .chat-input.form-control::placeholder {
            color: var(--text-muted) !important;
        }

        .chat-input.form-control:focus {
            outline: none;
            border-color: rgba(102, 126, 234, 0.5);
            background: rgba(255, 255, 255, 0.1) !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
            color: #fff !important;
        }

        .send-button {
            background: var(--primary-gradient);
            border: none;
            color: white;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-glow);
        }

        .send-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1.25rem;
        }

        .suggestion-chip {
            background: rgba(102, 126, 234, 0.2);
            color: rgba(102, 126, 234, 1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 0.75rem 1.25rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .suggestion-chip:hover {
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-2px);
        }

        /* Content sections */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        /* Improved text visibility in job cards */
        .job-card .card-text {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .job-card .text-muted {
            color: var(--text-muted) !important;
        }

        /* Enhanced dropdown menu */
        .dropdown-menu {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-intense);
            padding: 0.5rem;
        }

        .dropdown-item {
            color: var(--text-secondary);
            padding: 0.75rem 1rem;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .dropdown-item:hover {
            background: var(--glass-bg);
            color: var(--text-primary);
        }

        .dropdown-divider {
            border-color: var(--glass-border);
            margin: 0.5rem 0;
        }

        /* Enhanced Calendar Styles - Moved to right side */
        .calendar-container {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fade-in-up 0.8s ease-out;
            margin-top: 2rem;
            max-width: 350px;
            float: right;
            margin-left: 2rem;
            margin-bottom: 2rem;
        }

        .calendar-container.large {
            max-width: 500px;
            width: 500px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1001;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
        }

        .calendar-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: conic-gradient(from 0deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: rotate-gradient 15s linear infinite;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            position: relative;
            z-index: 2;
        }

        .calendar-title {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .calendar-controls {
            display: flex;
            gap: 0.25rem;
        }

        .calendar-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .calendar-btn:hover {
            background: rgba(102, 126, 234, 0.3);
            color: var(--text-primary);
            transform: scale(1.05);
        }

        .calendar-size-controls {
            display: flex;
            gap: 0.25rem;
            margin-left: auto;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            position: relative;
            z-index: 2;
        }

        .calendar-day-header {
            text-align: center;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            padding: 0.25rem 0;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            position: relative;
            color: var(--text-secondary);
        }

        .calendar-day:hover {
            background: rgba(102, 126, 234, 0.2);
            color: var(--text-primary);
        }

        .calendar-day.other-month {
            color: var(--text-muted);
            opacity: 0.4;
        }

        .calendar-day.today {
            background: var(--primary-gradient);
            color: white;
            font-weight: 600;
        }

        .calendar-day.has-application {
            position: relative;
            font-weight: 600;
            color: var(--text-primary);
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .calendar-day.has-application::after {
            content: '';
            position: absolute;
            bottom: 1px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: var(--accent-gradient);
            border-radius: 50%;
        }

        .calendar-day.has-application.today::after {
            background: white;
        }

        .calendar-legend {
            display: flex;
            gap: 0.75rem;
            margin-top: 0.75rem;
            font-size: 0.7rem;
            color: var(--text-muted);
            position: relative;
            z-index: 2;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .legend-dot.application {
            background: var(--accent-gradient);
        }

        .legend-dot.today {
            background: var(--primary-gradient);
        }

        /* Application count badge for calendar days with multiple applications */
        .application-count {
            position: absolute;
            top: 1px;
            right: 1px;
            background: var(--accent-gradient);
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Calendar Overlay for Large View */
        .calendar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
        }

        .calendar-overlay.show {
            display: block;
        }

        /* Badge Cards Styles - NEW: Positioned below calendar on right side */
        .badge-container {
            max-width: 350px;
            float: right;
            margin-left: 2rem;
            margin-top: 1rem;
            clear: both;
        }

        .badge-card {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fade-in-up 0.8s ease-out;
            box-shadow: var(--shadow-glow);
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .badge-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: conic-gradient(from 0deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: rotate-gradient 15s linear infinite;
        }

        .badge-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-intense);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .badge-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            position: relative;
            z-index: 2;
        }

        .badge-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 1rem;
            background: var(--rainbow-gradient);
            color: white;
            box-shadow: var(--shadow-glow);
        }

        .badge-title {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .badge-status {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .badge-status.completed {
            color: #4ecdc4;
        }

        .badge-status.in-progress {
            color: #feca57;
        }

        .badge-progress {
            position: relative;
            z-index: 2;
            margin-top: 1rem;
        }

        .badge-progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .badge-progress-fill {
            height: 100%;
            background: var(--rainbow-gradient);
            border-radius: 3px;
            transition: width 0.8s ease;
        }

        .badge-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-muted);
            position: relative;
            z-index: 2;
        }

        .badge-streak {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: #ff6b6b;
            font-weight: 600;
            position: relative;
            z-index: 2;
            margin-top: 0.5rem;
        }

        /* Enhanced Badge Styles - No Gradients */
        .badge-progress-fill {
            background: #4ecdc4 !important; /* Solid color instead of gradient */
        }

        .badge-icon {
            background: #4ecdc4 !important; /* Solid color instead of gradient */
        }

        .badge-card.completed .badge-icon {
            background: #51cf66 !important; /* Green for completed */
        }

        .badge-card.in-progress .badge-icon {
            background: #feca57 !important; /* Yellow for in-progress */
        }

        .badge-card.locked .badge-icon {
            background: #868e96 !important; /* Gray for locked */
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 1.5rem;
            }
            
            .main-content.expanded {
                margin-left: 0;
            }
            
            .mobile-menu-toggle {
                display: flex;
            }

            .chat-container {
                width: 95%;
                right: 2.5%;
                bottom: 15px;
            }

            .notification-dropdown {
                width: 320px;
                right: -50px;
            }

            .calendar-container {
                float: none;
                margin-left: 0;
                max-width: 100%;
            }
            
            .badge-container {
                float: none;
                margin-left: 0;
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .profile-top-right {
                flex-direction: column;
                gap: 10px;
                align-items: flex-end;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .chat-container {
                height: 450px;
            }
            
            .stats-number {
                font-size: 2.5rem;
            }
            
            .stats-card {
                padding: 1.75rem;
            }

            .notification-dropdown {
                width: 280px;
                right: -80px;
            }
        }

        @media (max-width: 480px) {
            .notification-dropdown {
                width: 250px;
                right: -100px;
            }
        }

        /* Premium Animations */
        @keyframes float-orbs {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            33% {
                transform: translateY(-30px) rotate(120deg);
            }
            66% {
                transform: translateY(20px) rotate(240deg);
            }
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
            }
        }

        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes pulse-logo {
            0%, 100% {
                box-shadow: var(--shadow-glow);
            }
            50% {
                box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
            }
        }

        @keyframes slide-down {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes count-up {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes rotate-gradient {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(25px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes message-appear {
            from {
                opacity: 0;
                transform: translateY(15px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes nav-shimmer {
            0% {
                left: -100%;
            }
            50% {
                left: 100%;
            }
            100% {
                left: 100%;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--rainbow-gradient);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-gradient);
        }
        
        a{
            text-decoration: none;
        }
        /* NEW: Single line horizontal scroll container for stats cards */
.stats-scroll-container {
    position: relative;
    margin-bottom: 2rem;
    overflow: hidden;
}

.stats-scroll-wrapper {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding-bottom: 10px;
    margin: 0 -15px;
    padding: 0 15px;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
    gap: 20px; /* Space between cards */
}

.stats-scroll-wrapper::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
}

.stats-scroll-item {
    flex: 0 0 auto;
    width: 280px; /* Fixed width for each card */
    min-width: 280px; /* Ensure minimum width */
}

.scroll-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
}

.scroll-btn {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s ease;
}

.scroll-btn:hover {
    background: rgba(102, 126, 234, 0.3);
    color: var(--text-primary);
    transform: scale(1.1);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .stats-scroll-item {
        width: 250px;
        min-width: 250px;
    }
}

@media (max-width: 480px) {
    .stats-scroll-item {
        width: 220px;
        min-width: 220px;
    }
}
 #freelancerMap {
        height: 350px;
      }
    </style>
</head>
<body>
    <!-- Premium Background Animation -->
    <div class="bg-animation">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        <div class="floating-orb orb-3"></div>
    </div>

    <!-- Premium Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="#" class="sidebar-brand">
                <div class="brand-logo">SJ</div>
                <span class="brand-text">SkillJourney</span>
            </a>
            <button class="toggle-sidebar" id="toggleSidebar">
                <i class="bi bi-chevron-left"></i>
            </button>
        </div>
        
        <div class="sidebar-menu">
            <div class="menu-section">Main</div>
            <a href="#" class="menu-item active" data-section="dashboard">
                <i class="bi bi-speedometer2"></i>
                <span>Dashboard</span>
            </a>
            
            <div class="menu-section">Opportunities</div>
           <a href="{% url 'internship_page' %}" 
                class="menu-item" 
                data-section="internships" 
                target="_blank" 
                rel="noopener noreferrer">
                    <i class="bi bi-briefcase"></i>
                    <span>Internships</span>
            </a>

        <a href="{% url 'jobs_page' %}" class="menu-item" data-section="jobs" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-person-workspace"></i>
            <span>Jobs</span>
        </a>

        <a href="{% url 'skill_trends' %}" class="menu-item" data-section="jobs" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-person-workspace"></i>
            <span>Skill Trends</span>
        </a>

        <div class="menu-section">Profile & Applications</div>

        <a href="{% url 'view_profile' %}" class="menu-item" data-section="profile" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-person"></i>
            <span>My Profile</span>
        </a>

        <a href="{% url 'freelancer_applications' %}" class="menu-item" data-section="applications" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-file-text"></i>
            <span>My Applications</span>
        </a>

        <a href="{% url 'saved_jobs' %}" class="menu-item" data-section="saved" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-bookmark"></i>
            <span>Saved Jobs</span>
        </a>

        <div class="menu-section">Account</div>

        <a href="{% url 'freelancer_message' %}" class="menu-item" data-section="messages" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-chat-dots"></i>
            <span>Messages</span>
        </a>

        <a href="{% url 'freelancer_discussions' %}" class="menu-item" data-section="messages" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-chat-dots"></i>
            <span>Discussions</span>
        </a>

        <!-- Freelancer Map -->
        <a href="{% url 'map' %}" class="menu-item" data-section="map" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-geo-alt"></i>
            <span>Freelancer Map</span>
        </a>

        <a href="{% url 'add_testimonial' %}" class="menu-item" data-section="feedback" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-star"></i>
            <span>Testimonials</span>
        </a>


            <a href="{% url 'logout' %}" class="menu-item">
                <i class="bi bi-box-arrow-right"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Premium Navigation -->
        <nav class="navbar navbar-light bg-white sticky-top mb-4 custom-navbar">
            <div class="container-fluid">
                <div class="d-flex align-items-center">
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <i class="bi bi-list"></i>
                    </button>
                    <div class="nav-brand-container">
                        <div class="animated-logo">
                            <i class="bi bi-rocket-takeoff"></i>
                        </div>
                        <div class="nav-text-content">
                            <h3 class="fw-bold mb-0">Freelancer Dashboard</h3>
                            <p class="text-muted mb-0 small welcome-text">Welcome back, <span class="username-highlight">{{ user.username }}</span>! Ready to conquer today?</p>
                        </div>
                    </div>
                </div>
                
                <!-- Profile in top right corner with Ask AI button and Notifications -->
                <div class="profile-top-right">
                    <a href="{% url 'freelancer_analytics' %}" target="_blank" rel="noopener noreferrer">
                        <button type="button" class="ask-ai-btn">
                            <i class="bi bi-graph-up"></i> 
                            Analytics
                        </button>
                    </a>

                    <button class="ask-ai-btn" id="askAiButton">
                        <i class="bi bi-robot"></i> Ask AI
                    </button>
                    
                    <!-- Notification Bell -->
                   
                    
                    <!-- Profile Dropdown -->
                    <div class="profile-dropdown">
                        <a href="{% url 'view_profile' %}">
                            {% if profile.profile_picture %}
                                <img src="{{ profile.profile_picture.url }}" class="profile-img me-2">
                            {% else %}
                                <img src="https://via.placeholder.com/100" class="profile-img me-2">
                            {% endif %}
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- AI Chat Container (Initially Hidden) -->
        <div class="chat-container" id="aiChatContainer">
            <div class="chat-header">
                <div>
                    <i class="bi bi-robot me-2"></i> AI Career Assistant
                </div>
                <button class="close-chat" id="closeChat">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <div class="message ai-message">
                    <div class="message-bubble">
                        Hi there! I'm your AI career assistant. How can I help you with your job search today?
                    </div>
                    <div class="message-time">Just now</div>
                </div>
                
                <div class="message ai-message">
                    <div class="message-bubble">
                        You can ask me things like:
                        <ul class="mt-2 mb-0">
                            <li>How to improve your resume</li>
                            <li>Interview preparation tips</li>
                            <li>Job search strategies</li>
                            <li>Career advice</li>
                        </ul>
                    </div>
                    <div class="message-time">Just now</div>
                </div>
            </div>
            
            <div class="chat-input-container">
                <div class="input-group">
                    <textarea class="chat-input form-control" id="message-input" rows="1" placeholder="Type your message..." onkeypress="handleKeyPress(event)"></textarea>
                    <button class="send-button ms-2" onclick="sendMessage()">
                        <i class="bi bi-send"></i>
                    </button>
                </div>

                <!-- Resume Upload -->
                <!-- Resume Upload -->
               <div class="input-group mb-2">
                    <input type="file" id="resume-file" class="form-control" accept=".pdf,.doc,.docx" 
                        style="height: 30px; font-size: 12px;" />
                    <button onclick="uploadResume()" 
                            style="padding: 2px 6px; font-size: 12px; height: 30px; line-height: 1.2;" 
                            class="btn btn-primary ms-2">
                        Upload Resume
                    </button>
                </div>



                <div class="suggestion-chips">
                    <button class="suggestion-chip" onclick="suggestionClick('Interview prep')">Interview prep</button>
                    <button class="suggestion-chip" onclick="suggestionClick('SkillJourney')">SkillJourney</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div class="content-section active" id="dashboard-section">
            <!-- Premium Stats Cards -->
           <div class="content-section active" id="dashboard-section">
    <!-- Premium Stats Cards with Single Line Horizontal Scroll -->
    <div class="stats-scroll-container">
        <div class="stats-scroll-wrapper" id="statsScrollWrapper">
            <div class="stats-scroll-item">
                <div class="stats-card">
                    <div class="stats-number">{{total_earnings}}</div>
                    <div class="stats-label"> Total Earnings</div>
                </div>
            </div>
             <div class="stats-scroll-item">
                <div class="stats-card">
                    <div class="stats-number">{{projects_completed}}</div>
                    <div class="stats-label">Projects</div>
                </div>
            </div>
            <div class="stats-scroll-item">
                <div class="stats-card">
                    <div class="stats-number">{{ applications_sent_count }}</div>
                    <div class="stats-label">Applications Sent</div>
                </div>
            </div>
            <div class="stats-scroll-item">
                <div class="stats-card">
                    <div class="stats-number">{{ applications_accepted_count }}</div>
                    <div class="stats-label">Approved</div>
                </div>
            </div>
            <div class="stats-scroll-item">
                <div class="stats-card">
                    <div class="stats-number">{{ my_interests_count }}</div>
                    <div class="stats-label">My Interests</div>
                </div>
            </div>
            <div class="stats-scroll-item">
                <div class="stats-card">
                    <div class="stats-number">{{ saved_jobs_count }}</div>
                    <div class="stats-label">Saved Jobs</div>
                </div>
            </div>

           
        </div>
        
        <div class="scroll-controls">
            <button class="scroll-btn" id="scrollLeftBtn">
                <i class="bi bi-chevron-left"></i>
            </button>
            <button class="scroll-btn" id="scrollRightBtn">
                <i class="bi bi-chevron-right"></i>
            </button>
        </div>
    </div>


            <!-- Compact Calendar Section - Moved to right side -->
            <div class="calendar-container" id="calendarContainer">
                <div class="calendar-header">
                    <h3 class="calendar-title">
                        <i class="bi bi-calendar3"></i>
                        Application Calendar
                    </h3>
                    <div class="calendar-controls">
                        <button class="calendar-btn" id="prevMonth">
                            <i class="bi bi-chevron-left"></i>
                        </button>
                        <button class="calendar-btn" id="nextMonth">
                            <i class="bi bi-chevron-right"></i>
                        </button>
                        <div class="calendar-size-controls">
                            <button class="calendar-btn" id="expandCalendar" title="Make Calendar Bigger">
                                <i class="bi bi-zoom-in"></i>
                            </button>
                            <button class="calendar-btn" id="closeCalendar" title="Make Calendar Smaller" style="display: none;">
                                <i class="bi bi-zoom-out"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Calendar headers and days will be populated by JavaScript -->
                </div>
                
                <div class="calendar-legend">
                    <div class="legend-item">
                        <div class="legend-dot today"></div>
                        <span>Today</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot application"></div>
                        <span>Applied</span>
                    </div>
                </div>
            </div>

            <!-- Badge Cards Section - NEW: Moved below calendar with same size -->
            <div class="badge-container" id="badgeContainer">
                <div class="page-header">
                    <h4 class="fw-bold mb-0"> Your Badges</h4>
                </div>
                
                <!-- Badge Cards -->
                {% for key, badge in badges.items %}
                    {% if key != 'profile' %}
                    <div class="badge-card {% if badge.has_badge %}completed{% else %}in-progress{% endif %}">
                        <div class="badge-header">
                            <div class="badge-icon">
                                <i class="bi bi-{% if badge.has_badge %}award{% else %}hourglass-split{% endif %}"></i>
                            </div>
                            <div>
                                <h5 class="badge-title">{{ key|title }} Badge</h5>
                                <div class="badge-status {% if badge.has_badge %}completed{% else %}in-progress{% endif %}">
                                    {% if badge.has_badge %}
                                        Level {{ badge.level }}
                                    {% else %}
                                        In Progress
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="badge-progress">
                            <div class="badge-progress-bar">
                                <div class="badge-progress-fill" style="width: {% if badge.has_badge %}100{% else %}{{ badge.completed }}{% endif %}%"></div>
                            </div>
                            <div class="badge-stats">
                                <span>Progress</span>
                                <span>
                                    {% if badge.completed %}
                                        {{ badge.completed }}{% if badge.next_target %}/{{ badge.next_target }}{% endif %}
                                    {% else %}
                                        0/{{ badge.next_target }}
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                        
                        {% if badge.streak %}
                        <div class="badge-streak">
                            <i class="bi bi-fire"></i>
                            <span>Streak: {{ badge.streak }} days</span>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                {% endfor %}
                
                <!-- Profile Badge separately -->
                <div class="badge-card {% if badges.profile.has_badge %}completed{% else %}in-progress{% endif %}">
                    <div class="badge-header">
                        <div class="badge-icon">
                            <i class="bi bi-person-{% if badges.profile.has_badge %}check{% else %}gear{% endif %}"></i>
                        </div>
                        <div>
                            <h5 class="badge-title">Profile Badge</h5>
                            <div class="badge-status {% if badges.profile.has_badge %}completed{% else %}in-progress{% endif %}">
                                {% if badges.profile.has_badge %}
                                    Completed
                                {% else %}
                                    In Progress
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="badge-progress">
                        <div class="badge-progress-bar">
                            <div class="badge-progress-fill" style="width: {{ badges.profile.completed }}%"></div>
                        </div>
                        <div class="badge-stats">
                            <span>Progress</span>
                            <span>{{ badges.profile.completed }}%</span>
                        </div>
                    </div>
                    
                    {% if not badges.profile.has_badge %}
                    <div class="badge-streak">
                        <i class="bi bi-info-circle"></i>
                        <span>Next target: 100%</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Calendar Overlay for Large View -->
            <div class="calendar-overlay" id="calendarOverlay"></div>

            <!-- Job Applications & Notifications Section - Updated with Icons -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="page-header">
                         <div class="notification-container position-relative">
                        <button class="notification-btn" id="notificationButton">
                            <i class="bi bi-bell"></i>
                            {% if unread_notifications_count > 0 %}
                            <span class="notification-badge">{{ unread_notifications_count }}</span>
                            {% endif %}
                        </button>
                        
                       
                        
                        <!-- Notification Dropdown -->
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-header">
                                <h6>Notifications</h6>
                                {% if unread_notifications_count > 0 %}
                                <button class="mark-all-read-btn" onclick="markAllAsRead()">Mark all as read</button>
                                {% endif %}
                            </div>
                            <div class="notification-list">
                                {% if notifications %}
                                    {% for notification in notifications %}
                                    <div class="notification-item {% if not notification.is_read %}unread{% endif %}" 
                                         data-notification-id="{{ notification.id }}">
                                        <div class="notification-icon">
                                            {% if notification.notification_type == 'application_accepted' %}
                                            <i class="bi bi-check-circle-fill text-success"></i>
                                            {% elif notification.notification_type == 'application_rejected' %}
                                            <i class="bi bi-x-circle-fill text-danger"></i>
                                            {% elif notification.notification_type == 'new_job' %}
                                            <i class="bi bi-briefcase-fill text-primary"></i>
                                            {% else %}
                                            <i class="bi bi-info-circle-fill text-info"></i>
                                            {% endif %}
                                        </div>
                                        <div class="notification-content">
                                            <p class="notification-message mb-1">{{ notification.message }}</p>
                                            <small class="notification-time">{{ notification.created_at|timesince }} ago</small>
                                        </div>
                                        {% if not notification.is_read %}
                                        <div class="notification-indicator"></div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <div class="notification-empty">
                                        <i class="bi bi-bell-slash"></i>
                                        <p>No notifications yet</p>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="notification-footer">
                                <a href="#" class="view-all-link">View All Notifications</a>
                            </div>
                        </div>
                    </div>
                        <h4 class="fw-bold mb-0">
                            <i  style="background: var(--rainbow-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
                            Job Applications & Notifications
                        </h4>
                        <p class="text-white mb-0" style="font-size: 0.85rem;">
                            <i class="bi bi-info-circle me-1"></i>
                            Your recent job applications and notifications
                        </p>
                    </div>

                    {% if jobs_notifications %}
                        {% for job in jobs_notifications %}
                            <div class="card mb-4 job-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <div class="d-flex align-items-center">
                                            <!-- Job Icon based on title -->
                                            <div class="job-icon {% if 'web' in job.title|lower or 'developer' in job.title|lower or 'frontend' in job.title|lower or 'backend' in job.title|lower or 'software' in job.title|lower or 'programmer' in job.title|lower %}web
                                                {% elif 'mobile' in job.title|lower or 'ios' in job.title|lower or 'android' in job.title|lower or 'app' in job.title|lower %}mobile
                                                {% elif 'design' in job.title|lower or 'ui' in job.title|lower or 'ux' in job.title|lower or 'graphic' in job.title|lower or 'creative' in job.title|lower %}design
                                                {% elif 'market' in job.title|lower or 'seo' in job.title|lower or 'content' in job.title|lower or 'digital' in job.title|lower or 'social' in job.title|lower %}marketing
                                                {% elif 'write' in job.title|lower or 'content' in job.title|lower or 'blog' in job.title|lower or 'copy' in job.title|lower or 'editor' in job.title|lower %}writing
                                                {% elif 'data' in job.title|lower or 'analyst' in job.title|lower or 'analytics' in job.title|lower or 'science' in job.title|lower %}data
                                                {% elif 'support' in job.title|lower or 'help' in job.title|lower or 'customer' in job.title|lower or 'service' in job.title|lower %}support
                                                {% elif 'sales' in job.title|lower or 'account' in job.title|lower or 'business' in job.title|lower %}sales
                                                {% elif 'manage' in job.title|lower or 'director' in job.title|lower or 'lead' in job.title|lower or 'supervisor' in job.title|lower %}management
                                                {% elif 'consult' in job.title|lower or 'advisor' in job.title|lower %}consulting
                                                {% elif 'teach' in job.title|lower or 'educat' in job.title|lower or 'train' in job.title|lower or 'instructor' in job.title|lower %}education
                                                {% else %}default{% endif %}">
                                                <i class="bi bi-{% if 'web' in job.title|lower or 'developer' in job.title|lower or 'frontend' in job.title|lower or 'backend' in job.title|lower or 'software' in job.title|lower or 'programmer' in job.title|lower %}code-slash
                                                    {% elif 'mobile' in job.title|lower or 'ios' in job.title|lower or 'android' in job.title|lower or 'app' in job.title|lower %}phone
                                                    {% elif 'design' in job.title|lower or 'ui' in job.title|lower or 'ux' in job.title|lower or 'graphic' in job.title|lower or 'creative' in job.title|lower %}palette
                                                    {% elif 'market' in job.title|lower or 'seo' in job.title|lower or 'content' in job.title|lower or 'digital' in job.title|lower or 'social' in job.title|lower %}graph-up-arrow
                                                    {% elif 'write' in job.title|lower or 'content' in job.title|lower or 'blog' in job.title|lower or 'copy' in job.title|lower or 'editor' in job.title|lower %}pencil
                                                    {% elif 'data' in job.title|lower or 'analyst' in job.title|lower or 'analytics' in job.title|lower or 'science' in job.title|lower %}bar-chart
                                                    {% elif 'support' in job.title|lower or 'help' in job.title|lower or 'customer' in job.title|lower or 'service' in job.title|lower %}headset
                                                    {% elif 'sales' in job.title|lower or 'account' in job.title|lower or 'business' in job.title|lower %}currency-dollar
                                                    {% elif 'manage' in job.title|lower or 'director' in job.title|lower or 'lead' in job.title|lower or 'supervisor' in job.title|lower %}person-gear
                                                    {% elif 'consult' in job.title|lower or 'advisor' in job.title|lower %}chat-dots
                                                    {% elif 'teach' in job.title|lower or 'educat' in job.title|lower or 'train' in job.title|lower or 'instructor' in job.title|lower %}book
                                                    {% else %}briefcase{% endif %}"></i>
                                            </div>
                                            <h5 class="card-title mb-1">{{ job.title }}</h5>
                                        </div>
                                        <div class="job-actions">
                                            <button class="save-btn {% if job.saved %}saved{% endif %}" data-job-id="{{ job.id }}">
                                                <i class="{% if job.saved %}fas{% else %}far{% endif %} fa-bookmark"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mb-2">
                                        <i class="bi bi-building me-2 text-muted"></i>
                                        <p class="card-text text-muted mb-0">{{ job.recruiter.company_name }}</p>
                                    </div>

                                    <div class="d-flex align-items-start mb-3">
                                        <i class="bi bi-text-paragraph me-2 text-muted mt-1"></i>
                                        <p class="card-text mb-0">{{ job.description|truncatewords:20 }}</p>
                                    </div>

                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-clock me-1 text-muted"></i>
                                            <small class="text-muted">Posted {{ job.created_at|timesince }} ago</small>
                                        </div>
                                        <a href="{% url 'apply_job' job.id %}" class="btn btn-primary btn-sm apply-job-btn" data-job-id="{{ job.id }}">
                                            {% if job.applied %}
                                                <i class="bi bi-check-circle me-1"></i>Applied
                                            {% else %}
                                                <i class="bi bi-eye me-1"></i>View Details
                                            {% endif %}
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        
                        <!-- See More Link with Icon -->
                        <div class="text-center mt-4">
                            <a href="{% url 'jobs_page' %}" class="btn btn-link">
                                <i class="bi bi-arrow-right me-1"></i>See More Jobs
                            </a>
                        </div>
                    {% else %}
                        <!-- Empty State with Icons -->
                        <div class="text-center py-5">
                            <i class="bi bi-inbox display-4 text-muted mb-3"></i>
                            <h5 class="text-muted">
                                <i class="bi bi-bell-slash me-2"></i>No job notifications available
                            </h5>
                            <p class="text-muted">
                                <i class="bi bi-info-circle me-1"></i>Check back later for new opportunities
                            </p>
                            <a href="{% url 'jobs_page' %}" class="btn btn-primary mt-3">
                                <i class="bi bi-search me-1"></i>Browse All Jobs
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Other sections (initially hidden) -->
        <div class="content-section" id="internships-section">
            <div class="page-header">
                <h4 class="fw-bold mb-0">Internship Opportunities</h4>
                <p class="text-muted mb-0">Find the perfect internship to kickstart your career</p>
            </div>
            <p>Internship content would go here.</p>
        </div>

        <div class="content-section" id="jobs-section">
            <div class="page-header">
                <h4 class="fw-bold mb-0">Job Opportunities</h4>
                <p class="text-muted mb-0">Browse available job positions</p>
            </div>
            <p>Job listings content would go here.</p>
        </div>

        <div class="content-section" id="profile-section">
            <div class="page-header">
                <h4 class="fw-bold mb-0">My Profile</h4>
                <p class="text-muted mb-0">Manage your professional profile</p>
            </div>
            <p>Profile management content would go here.</p>
        </div>

        <div class="content-section" id="applications-section">
            <div class="page-header">
                <h4 class="fw-bold mb-0">My Applications</h4>
                <p class="text-muted mb-0">Track your job applications</p>
            </div>
            <p>Applications content would go here.</p>
        </div>

        <div class="content-section" id="saved-section">
            <div class="page-header">
                <h4 class="fw-bold mb-0">Saved Jobs</h4>
                <p class="text-muted mb-0">Your favorite job opportunities</p>
            </div>
            <p>Saved jobs content would go here.</p>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Calendar functionality - Updated with real-time application tracking
        document.addEventListener('DOMContentLoaded', function() {
            const calendarContainer = document.getElementById('calendarContainer');
            const calendarGrid = document.getElementById('calendarGrid');
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            const expandCalendarBtn = document.getElementById('expandCalendar');
            const closeCalendarBtn = document.getElementById('closeCalendar');
            const calendarOverlay = document.getElementById('calendarOverlay');
            
            let currentDate = new Date();
            let applicationDates = [];
            
            // Get application dates from Django context
            function getApplicationDates() {
                try {
                    // Parse the actual application dates from Django template
                    const dates = JSON.parse('{{ application_dates|safe }}') || [];
                    return dates;
                } catch (e) {
                    console.error('Error parsing application dates:', e);
                    // Fallback to sample data if there's an error
                    const today = new Date();
                    const year = today.getFullYear();
                    const month = today.getMonth() + 1;
                    
                    return [
                        `${year}-${month.toString().padStart(2, '0')}-05`,
                        `${year}-${month.toString().padStart(2, '0')}-12`,
                        `${year}-${month.toString().padStart(2, '0')}-18`,
                        `${year}-${month.toString().padStart(2, '0')}-22`,
                        `${year}-${(month + 1).toString().padStart(2, '0')}-03`,
                        `${year}-${(month + 1).toString().padStart(2, '0')}-10`
                    ];
                }
            }
            
            // Initialize application dates
            applicationDates = getApplicationDates();
            
            // Count applications per date for multiple applications on same day
            function getApplicationCounts() {
                const counts = {};
                applicationDates.forEach(date => {
                    counts[date] = (counts[date] || 0) + 1;
                });
                return counts;
            }
            
            // Day names for header
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            // Create calendar header
            function createCalendarHeader() {
                // Clear existing content
                calendarGrid.innerHTML = '';
                
                dayNames.forEach(day => {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day-header';
                    dayElement.textContent = day;
                    calendarGrid.appendChild(dayElement);
                });
            }
            
            // Generate calendar for given month and year
            function generateCalendar(year, month) {
                // Clear existing calendar days (keep headers)
                const existingDays = document.querySelectorAll('.calendar-day');
                existingDays.forEach(day => day.remove());
                
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startingDay = firstDay.getDay();
                
                // Add empty cells for days before the first day of the month
                for (let i = 0; i < startingDay; i++) {
                    const emptyDay = document.createElement('div');
                    emptyDay.className = 'calendar-day other-month';
                    calendarGrid.appendChild(emptyDay);
                }
                
                // Add days of the month
                const today = new Date();
                const applicationCounts = getApplicationCounts();
                
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = day;
                    
                    // Check if this is today
                    if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                        dayElement.classList.add('today');
                    }
                    
                    // Check if this day has an application
                    const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    if (applicationDates.includes(dateString)) {
                        dayElement.classList.add('has-application');
                        
                        // Add application count badge if multiple applications on same day
                        const applicationCount = applicationCounts[dateString];
                        if (applicationCount > 1) {
                            const countBadge = document.createElement('div');
                            countBadge.className = 'application-count';
                            countBadge.textContent = applicationCount;
                            dayElement.appendChild(countBadge);
                        }
                        
                        // Add tooltip with application info
                        dayElement.title = `${applicationCounts[dateString]} application${applicationCounts[dateString] > 1 ? 's' : ''} submitted on this date`;
                    }
                    
                    calendarGrid.appendChild(dayElement);
                }
                
                // Update calendar title
                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'];
                document.querySelector('.calendar-title').innerHTML = 
                    `<i class="bi bi-calendar3"></i>${monthNames[month]} ${year}`;
            }
            
            // Navigate to previous month
            prevMonthBtn.addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
            });
            
            // Navigate to next month
            nextMonthBtn.addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
            });
            
            // Expand calendar view
            expandCalendarBtn.addEventListener('click', function() {
                calendarContainer.classList.add('large');
                closeCalendarBtn.style.display = 'flex';
                calendarOverlay.classList.add('show');
                document.body.style.overflow = 'hidden';
            });
            
            // Close expanded calendar view
            closeCalendarBtn.addEventListener('click', function() {
                calendarContainer.classList.remove('large');
                closeCalendarBtn.style.display = 'none';
                calendarOverlay.classList.remove('show');
                document.body.style.overflow = 'auto';
            });
            
            // Close calendar when clicking overlay
            calendarOverlay.addEventListener('click', function() {
                calendarContainer.classList.remove('large');
                closeCalendarBtn.style.display = 'none';
                calendarOverlay.classList.remove('show');
                document.body.style.overflow = 'auto';
            });
            
            // Close calendar with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && calendarContainer.classList.contains('large')) {
                    calendarContainer.classList.remove('large');
                    closeCalendarBtn.style.display = 'none';
                    calendarOverlay.classList.remove('show');
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Initialize calendar
            createCalendarHeader();
            generateCalendar(currentDate.getFullYear(), currentDate.getMonth());

            // Real-time application tracking
            function addApplicationToCalendar(dateString) {
                if (!applicationDates.includes(dateString)) {
                    applicationDates.push(dateString);
                    // Regenerate calendar to show new application
                    generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
                }
            }

            // Handle job application submissions
            document.querySelectorAll('.apply-job-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    const jobId = this.getAttribute('data-job-id');
                    
                    // If it's a "View Details" button, let it proceed normally
                    if (this.textContent.includes('View Details')) {
                        return; // Allow default behavior
                    }
                    
                    // If it's an "Applied" button, prevent default and show message
                    e.preventDefault();
                    alert('You have already applied to this job.');
                });
            });

            // AJAX handler for real-time application updates
            function handleApplicationSubmission(jobId, applicationDate) {
                // Add the application date to the calendar
                addApplicationToCalendar(applicationDate);
                
                // Update the button to show "Applied"
                const applyBtn = document.querySelector(`.apply-job-btn[data-job-id="${jobId}"]`);
                if (applyBtn) {
                    applyBtn.innerHTML = '<i class="bi bi-check-circle me-1"></i>Applied';
                    applyBtn.classList.add('disabled');
                }
            }

            // Your existing JavaScript code remains exactly the same below this point
            // Sidebar toggle functionality
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const toggleButton = document.getElementById('toggleSidebar');
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const menuItems = document.querySelectorAll('.menu-item');
            const askAiButton = document.getElementById('askAiButton');
            const aiChatContainer = document.getElementById('aiChatContainer');
            const closeChat = document.getElementById('closeChat');

            // Toggle sidebar collapse/expand
            toggleButton.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');
            });
            
            // Mobile menu toggle
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('mobile-open');
                });
            }
            
            // Toggle AI Chat
            askAiButton.addEventListener('click', function() {
                aiChatContainer.classList.toggle('open');
            });
            
            closeChat.addEventListener('click', function() {
                aiChatContainer.classList.remove('open');
            });
            
            const aiHistory = JSON.parse('{{ ai_history|escapejs }}');

            aiHistory.forEach(log => {
                addMessage(log.prompt, 'user');
                addMessage(log.response, 'ai');
            });

            // Close chat when clicking outside
            document.addEventListener('click', function(e) {
                if (!aiChatContainer.contains(e.target) && 
                    !askAiButton.contains(e.target) &&
                    aiChatContainer.classList.contains('open')) {
                    aiChatContainer.classList.remove('open');
                }
            });

            // Close mobile sidebar when clicking outside
            document.addEventListener('click', function(e) {
                if (window.innerWidth <= 992 && 
                    !sidebar.contains(e.target) && 
                    !mobileMenuToggle?.contains(e.target) &&
                    sidebar.classList.contains('mobile-open')) {
                    sidebar.classList.remove('mobile-open');
                }
            });

            // Menu item click handlers
            menuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    if (this.getAttribute('href') === '#') {
                        e.preventDefault();
                    }
                    
                    // Update active state
                    menuItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Close mobile sidebar after selection
                    if (window.innerWidth <= 992) {
                        sidebar.classList.remove('mobile-open');
                    }
                });
            });

            // Save job functionality
            document.querySelectorAll('.save-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const jobId = this.getAttribute('data-job-id');
                    const icon = this.querySelector('i');
                    
                    // Toggle saved state
                    this.classList.toggle('saved');
                    if (this.classList.contains('saved')) {
                        icon.classList.remove('far');
                        icon.classList.add('fas');
                    } else {
                        icon.classList.remove('fas');
                        icon.classList.add('far');
                    }
                    
                    // In a real app, you would make an API call here
                    console.log(`Toggled save for job ${jobId}`);
                });
            });
        });
        
        // Your existing notification and AI chat functions remain exactly the same
        // Notification functionality
        document.addEventListener('DOMContentLoaded', function() {
            const notificationButton = document.getElementById('notificationButton');
            const notificationDropdown = document.getElementById('notificationDropdown');
            
            // Toggle notification dropdown
            if (notificationButton && notificationDropdown) {
                notificationButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    notificationDropdown.classList.toggle('show');
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function(e) {
                    if (!notificationButton.contains(e.target) && !notificationDropdown.contains(e.target)) {
                        notificationDropdown.classList.remove('show');
                    }
                });
                
                // Handle notification item clicks
                document.querySelectorAll('.notification-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const notificationId = this.getAttribute('data-notification-id');
                        markAsRead(notificationId);
                        // You can add additional logic here, like navigating to the related job/application
                    });
                });
            }
        });

        // Mark notification as read
        function markAsRead(notificationId) {
            // Send AJAX request to mark notification as read
            fetch(`/notifications/${notificationId}/mark-read/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCSRFToken(),
                    'Content-Type': 'application/json',
                },
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update UI
                    const notificationItem = document.querySelector(`[data-notification-id="${notificationId}"]`);
                    if (notificationItem) {
                        notificationItem.classList.remove('unread');
                        const indicator = notificationItem.querySelector('.notification-indicator');
                        if (indicator) {
                            indicator.remove();
                        }
                        
                        // Update badge count
                        updateNotificationBadge();
                    }
                }
            })
            .catch(error => console.error('Error:', error));
        }

        // Mark all notifications as read
        function markAllAsRead() {
            fetch('/notifications/mark-all-read/', {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCSRFToken(),
                    'Content-Type': 'application/json',
                },
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update UI
                    document.querySelectorAll('.notification-item').forEach(item => {
                        item.classList.remove('unread');
                        const indicator = item.querySelector('.notification-indicator');
                        if (indicator) {
                            indicator.remove();
                        }
                    });
                    
                    // Update badge count
                    updateNotificationBadge();
                }
            })
            .catch(error => console.error('Error:', error));
        }

        // Update notification badge
        function updateNotificationBadge() {
            const badge = document.querySelector('.notification-badge');
            if (badge) {
                const unreadCount = document.querySelectorAll('.notification-item.unread').length;
                if (unreadCount > 0) {
                    badge.textContent = unreadCount;
                } else {
                    badge.remove();
                }
            }
        }

        // Get CSRF token
        function getCSRFToken() {
            return document.querySelector('[name=csrfmiddlewaretoken]').value;
        }
        
        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();

            if (message) {
                // Example snippet inside getAIResponse()
                if (message.includes('website') || message.includes('how it works') || message.includes('SkillJourney')) {
                    addMessage("SkillJourney helps freelancers find and apply for jobs! Here's how it works:\n\n1) Register and create an account\n2) Build your complete profile with skills, experience, and portfolio\n3) Go to your dashboard to see job notifications\n4) Apply to jobs that match your skills\n5) Wait for recruiter approval/rejection notifications\n6) Communicate with clients through the platform\n7) Build your reputation with completed projects\n\nWhat would you like to know more about?", 'user');
                }

                addMessage(message, 'user');
                input.value = '';

                // Show typing indicator
                addMessage('AI is typing...', 'ai', true);

                fetch('/ask-ai/', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken'),
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ message: message })
                })
                .then(response => response.json())
                .then(data => {
                    removeTypingIndicator();
                    addMessage(data.reply, 'ai');
                })
                .catch(err => {
                    removeTypingIndicator();
                    addMessage("Sorry, something went wrong.", 'ai');
                    console.error(err);
                });
            }
        }
        
        async function uploadResume() {
            const fileInput = document.getElementById("resume-file");
            const file = fileInput.files[0];

            if (!file) {
                alert("Please select a resume file (.pdf or .docx).");
                return;
            }

            // Add user message in chat
            addMessage(`Uploaded resume: ${file.name}`, "user");

            // Prepare FormData
            const formData = new FormData();
            formData.append("resume", file);

            try {
                const response = await fetch("/ask-ai-resume/", {
                    method: "POST",
                    headers: {
                        "X-CSRFToken": getCookie("csrftoken") // Make sure CSRF token is included
                    },
                    body: formData
                });

                const data = await response.json();

                if (data.reply) {
                    addMessage(data.reply, "ai");
                } else {
                    addMessage("Sorry, AI could not process your resume.", "ai");
                }
            } catch (error) {
                console.error("Error uploading resume:", error);
                addMessage("Error uploading resume. Please try again.", "ai");
            }

            // Clear file input
            fileInput.value = "";
        }

        // Add a message to the chat
        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;

            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'message-bubble';

            // Preserve line breaks in the response
            bubbleDiv.innerHTML = text.replace(/\n/g, '<br>');
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = 'Just now';
            
            messageDiv.appendChild(bubbleDiv);
            messageDiv.appendChild(timeDiv);
            messagesContainer.appendChild(messageDiv);
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const typingBubbles = document.querySelectorAll('message ai-message');
            typingBubbles.forEach(bubble => bubble.remove());
        }

        // Handle enter key press
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }
        
        // Handle suggestion chip clicks
        function suggestionClick(text) {
            document.getElementById('message-input').value = text;
            sendMessage();
        }
        // CSRF helper
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let cookie of cookies) {
                    cookie = cookie.trim();
                    if (cookie.startsWith(name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

         // Horizontal scroll functionality for stats cards
document.addEventListener('DOMContentLoaded', function() {
    const statsScrollWrapper = document.getElementById('statsScrollWrapper');
    const scrollLeftBtn = document.getElementById('scrollLeftBtn');
    const scrollRightBtn = document.getElementById('scrollRightBtn');
    
    if (statsScrollWrapper && scrollLeftBtn && scrollRightBtn) {
        const scrollAmount = 300; // Scroll by one card width
        
        scrollLeftBtn.addEventListener('click', function() {
            statsScrollWrapper.scrollBy({
                left: -scrollAmount,
                behavior: 'smooth'
            });
        });
        
        scrollRightBtn.addEventListener('click', function() {
            statsScrollWrapper.scrollBy({
                left: scrollAmount,
                behavior: 'smooth'
            });
        });
        
        // Hide/show scroll buttons based on scroll position
        function updateScrollButtons() {
            const scrollLeft = statsScrollWrapper.scrollLeft;
            const maxScrollLeft = statsScrollWrapper.scrollWidth - statsScrollWrapper.clientWidth;
            
            scrollLeftBtn.style.opacity = scrollLeft > 0 ? '1' : '0.5';
            scrollRightBtn.style.opacity = scrollLeft < maxScrollLeft ? '1' : '0.5';
        }
        
        statsScrollWrapper.addEventListener('scroll', updateScrollButtons);
        window.addEventListener('resize', updateScrollButtons);
        updateScrollButtons(); // Initial check
    }
});
                
                
    </script>
</body>
</html>